################################################################################
This is referred to the book of "Spring in Action, 4th Edition" by Craig Walls
1. You can get the digital book from Toronto Library
2. Source code of the book is located at src\test\bookSourceCode\SpringiA4_SourceCode.zip 
###############################################################################

################ Source Code Change Before Moving to Heroku Platform ###########
1. Added Procfile under the root folder
2. Change the pox.xml using the jetty plugin

################################################################################

########################## Heroku Manual ######################################
https://devcenter.heroku.com/articles/getting-started-with-java#set-up

Install heroku Environment (install 03_heroku-toolbelt_HerokuOnly.exe)

###############################################################################

######################### Heroku Operations ###################################
1.
heroku login
    
2. 
git clone https://github.com/RyanCA/springinaction4thedition.git

3.
cd springinaction4thedition

4. create heroku project
heroku create                            # heroku create with system random name
or
heroku create springinaction4thedition   # heroku create app given name

########################## heroku result of above command ######################
C:\...\eclipse_projects\springinaction4thedition\springinaction4thedtion_heroku\springinaction4thedition>heroku create springinaction4thedition
Creating springinaction4thedition... done
https://springinaction4thedition.herokuapp.com/ | https://git.heroku.com/springinaction4thedition.git

C:\...\eclipse_projects\springinaction4thedition\springinaction4thedtion_heroku\springinaction4thedition>

C:\...\eclipse_projects\springinaction4thedition\springinaction4thedtion_heroku\springinaction4thedition>git remote -v
heroku  https://git.heroku.com/springinaction4thedition.git (fetch)
heroku  https://git.heroku.com/springinaction4thedition.git (push)
origin  https://github.com/RyanCA/springinaction4thedition.git (fetch)
origin  https://github.com/RyanCA/springinaction4thedition.git (push)
################################################################################

5. If you want to remove this app
heroku apps:destroy -app springinaction4thedition

6. display heroku apps
heroku apps                             # heroku displays apps

7. use git push to put source code to heroku git and deploy app
(This will stop running apps, so you don't need to use command of "heroku ps:scale web=0" to stop app before deploy)
git push heroku master


8. Check app is deployed or not. Please check POM.XML and PROCFILE to see how we 
  can make web app runnable on heroku platform through heroku commands
heroku ps:scale web=1                   # Ensure that at least one instance of the app is running unless app crashed during the launch
heroku ps                               # check if any app is up
heroku logs                             # to see log if the server starts successfully

9. Now visit the app at the URL generated by its app name. As a handy shortcut, you can open the website as follows:
heroku open

################################################################################

###################### To be continued... ######################################
4.6 Heroku DB related
https://devcenter.heroku.com/articles/heroku-postgresql#provisioning-the-add-on

4.6.1 
heroku addons #to get all addons infomation including database)

Plan                         Name                Price
---------------------------  ------------------  -----
heroku-postgresql:hobby-dev  glowing-newly-5714  free

=== Attachments for carrental2015
Name      Add-on              Billing App
--------  ------------------  -------------
DATABASE  glowing-newly-5714  carrental2015

#If database is not there, please using below command to set it up.
4.6.1.1
heroku addons:create heroku-postgresql:hobby-dev

4.6.2 
heroku config #Check db url

=== carrental2015 Config Vars
DATABASE_URL: postgres://wmoemmlbtmyaob:Mzg3OijAltF2G6v0AWDqVrRUlt@ec2-54-83-17-
8.compute-1.amazonaws.com:5432/deghr853ufffo3
JAVA_OPTS:    -XX:+UseCompressedOops

4.6.3 check DB detail information
heroku pg:info

4.6.4 import data from Postgre dump file
https://devcenter.heroku.com/articles/heroku-postgres-import-export#import

heroku pg:psql #To run this command, Postgre DB must installed in local as pre-requisite

#######################################################################

